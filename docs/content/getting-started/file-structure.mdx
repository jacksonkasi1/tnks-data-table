---
title: File Structure
description: Understanding the recommended file structure for implementing the data table
---

# File Structure

The data table follows a modular architecture that separates concerns and improves maintainability. This guide explains the recommended file organization.

## Recommended Project Structure

```
src/
├── api/                       # API integration layer
│   └── entity/                # Entity-specific API functions
│       ├── add-entity.ts      # Create operation
│       ├── delete-entity.ts   # Delete operation
│       ├── fetch-entities.ts  # List operation with filters
│       └── fetch-entity-by-ids.ts # Fetch specific entities
│
├── components/                # Shared UI components
│   ├── data-table/            # Core data table components
│   │   ├── hooks/             # Custom React hooks
│   │   │   └── use-table-column-resize.ts
│   │   ├── utils/             # Utility functions
│   │   │   ├── column-sizing.ts
│   │   │   ├── conditional-state.ts
│   │   │   ├── date-format.ts
│   │   │   ├── deep-utils.ts
│   │   │   ├── export-utils.ts
│   │   │   ├── keyboard-navigation.ts
│   │   │   ├── search.ts
│   │   │   ├── table-config.ts
│   │   │   ├── table-state-handlers.ts
│   │   │   └── url-state.ts
│   │   ├── column-header.tsx
│   │   ├── data-export.tsx
│   │   ├── data-table-resizer.tsx
│   │   ├── data-table.tsx
│   │   ├── expand-icon.tsx
│   │   ├── pagination.tsx
│   │   ├── subrow-columns.tsx
│   │   ├── toolbar.tsx
│   │   └── view-options.tsx
│   ├── ui/                    # Shadcn UI components
│   └── calendar-date-picker.tsx
│
├── app/                       # Application routes and pages
│   └── (section)/             # Section grouping
│       └── entity-table/      # Entity-specific implementation
│           ├── components/    # Entity table components
│           │   ├── columns.tsx
│           │   ├── row-actions.tsx
│           │   ├── toolbar-options.tsx
│           │   └── actions/
│           │       ├── add-entity-popup.tsx
│           │       ├── delete-entity-popup.tsx
│           │       └── bulk-delete-popup.tsx
│           ├── schema/        # Data schemas
│           │   └── index.ts
│           ├── utils/         # Utility functions
│           │   ├── config.ts
│           │   └── data-fetching.ts
│           ├── index.tsx      # Table component entry
│           └── page.tsx       # Next.js page
│
└── lib/                       # Shared utilities
    ├── utils.ts               # Common utility functions
    └── providers.tsx          # React Query and other providers
```

## Layer Breakdown

### 1. API Layer (`/api`)

Handles all backend communication. Each entity has its own folder with CRUD operations.

```typescript title="src/api/user/fetch-users.ts"
export async function fetchUsers(params: FetchUsersParams) {
  // API call logic
}
```

**Key Files:**
- `fetch-entities.ts` - GET list with server-side operations
- `fetch-entities-by-ids.ts` - GET multiple records by ID
- `add-entity.ts` - POST create operation
- `delete-entity.ts` - DELETE operation

### 2. Core Components Layer (`/components/data-table`)

Reusable table components used across all table implementations.

#### Main Components

| Component | Purpose |
|-----------|---------|
| `data-table.tsx` | Main table component with all logic |
| `column-header.tsx` | Sortable column headers |
| `toolbar.tsx` | Search, filters, and actions |
| `pagination.tsx` | Page navigation controls |
| `view-options.tsx` | Column visibility toggle |
| `data-export.tsx` | CSV/Excel export UI |
| `expand-icon.tsx` | Subrow expand/collapse icon |

#### Hooks

Custom React hooks for specialized functionality:

```typescript title="src/components/data-table/hooks/use-table-column-resize.ts"
export function useTableColumnResize(tableId: string) {
  // Column resize state management
}
```

#### Utilities

Helper functions organized by purpose:

| Utility File | Purpose |
|--------------|---------|
| `table-config.ts` | Type definitions and defaults |
| `url-state.ts` | URL state persistence |
| `export-utils.ts` | Data export transformations |
| `search.ts` | Search functionality |
| `date-format.ts` | Date formatting utilities |
| `column-sizing.ts` | Column width calculations |

### 3. Implementation Layer (`/app/(section)/entity-table`)

Entity-specific table implementations. This is where you customize the table for your specific data.

#### Components Directory

```
components/
├── columns.tsx                # Column definitions
├── row-actions.tsx            # Row-level actions menu
├── toolbar-options.tsx        # Toolbar customizations
└── actions/                   # Modal/popup components
    ├── add-entity-popup.tsx
    ├── delete-entity-popup.tsx
    └── bulk-delete-popup.tsx
```

**columns.tsx** - Define your table columns:
```typescript
export const getColumns = (handleRowDeselection) => [
  {
    accessorKey: "name",
    header: ({ column }) => (
      <DataTableColumnHeader column={column} title="Name" />
    ),
    // ...
  },
];
```

**row-actions.tsx** - Actions for individual rows:
```typescript
export function DataTableRowActions({ row, table }) {
  // Edit, delete, view details, etc.
}
```

**toolbar-options.tsx** - Custom toolbar content:
```typescript
export function ToolbarOptions({ selectedRows, resetSelection }) {
  // Add, bulk delete, bulk actions, etc.
}
```

#### Schema Directory

Type definitions and validation schemas:

```typescript title="schema/index.ts"
export const entitySchema = z.object({
  id: z.number(),
  name: z.string(),
  // ...
});

export type Entity = z.infer<typeof entitySchema>;
```

#### Utils Directory

**config.ts** - Export configuration:
```typescript
export function useExportConfig() {
  return {
    columnMapping: { /* ... */ },
    headers: [/* ... */],
    entityName: "entities",
  };
}
```

**data-fetching.ts** - React Query hooks:
```typescript
export function useEntitiesData(/* params */) {
  return useQuery({
    queryKey: ["entities", /* ... */],
    queryFn: () => fetchEntities(/* ... */),
  });
}
```

#### Main Files

**index.tsx** - Table component wrapper:
```typescript
export default function EntityTable() {
  return (
    <DataTable
      getColumns={getColumns}
      fetchDataFn={useEntitiesData}
      // ... other props
    />
  );
}
```

**page.tsx** - Next.js page component:
```typescript
export default function EntityPage() {
  return <EntityTable />;
}
```

## File Organization Principles

### Separation of Concerns

Each layer has a specific responsibility:

1. **API Layer** - Backend communication only
2. **Core Components** - Reusable UI and logic
3. **Implementation** - Entity-specific configuration
4. **Schema** - Type safety and validation
5. **Utils** - Helper functions and configuration

### Modularity

Components are self-contained and reusable:

```typescript
// ✅ Good - Modular and reusable
import { DataTable } from "@/components/data-table/data-table";
import { getColumns } from "./components/columns";

// ❌ Bad - Tightly coupled
import { CustomDataTableWithEverything } from "./monster-component";
```

### Discoverability

Files are named clearly and organized logically:

```
✅ Good Structure:
users/
  components/
    columns.tsx
    row-actions.tsx
  schema/
    index.ts
  utils/
    config.ts
    data-fetching.ts

❌ Poor Structure:
users/
  stuff.tsx
  helpers.ts
  things.ts
```

## Creating a New Table

Follow this pattern to create a new table:

<Steps>
### Create the directory structure

```bash
mkdir -p src/app/(section)/entity-table/{components/actions,schema,utils}
```

### Add API functions

Create CRUD operations in `/api/entity/`.

### Define schemas

Add Zod schemas in `schema/index.ts`.

### Create column definitions

Implement columns in `components/columns.tsx`.

### Add data fetching hook

Create React Query hook in `utils/data-fetching.ts`.

### Implement the table

Wire everything together in `index.tsx`.

### Create the page

Add the Next.js page in `page.tsx`.
</Steps>

## Best Practices

### Naming Conventions

- **Components**: PascalCase (e.g., `DataTable.tsx`)
- **Utilities**: kebab-case (e.g., `url-state.ts`)
- **Hooks**: camelCase with 'use' prefix (e.g., `useTableState`)
- **Types**: PascalCase (e.g., `User`, `TableConfig`)

### Import Organization

```typescript
// 1. External libraries
import { useState } from "react";
import { useQuery } from "@tanstack/react-query";

// 2. Internal components
import { DataTable } from "@/components/data-table/data-table";
import { Button } from "@/components/ui/button";

// 3. Local files
import { getColumns } from "./components/columns";
import { User } from "./schema";
```

### File Size

Keep files focused and manageable:

- Components: < 200 lines
- Utilities: < 150 lines
- Configuration: < 100 lines

If a file grows too large, split it into smaller modules.

## Next Steps

- [Quick Start Guide](/docs/getting-started) - Build your first table
- [Core Concepts](/docs/core-concepts) - Understand the architecture
- [Examples](/docs/examples) - See real implementations
